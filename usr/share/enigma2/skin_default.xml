<skin>
	<!-- Main screen colors (id=1 LCD) -->
	<windowstyle type="skinned" id="1">
		<color name="Background" color="#000000" />
		<color name="LabelForeground" color="#ffffff" />
		<color name="ListboxBackground" color="#000000" />
		<color name="ListboxForeground" color="#ffffff" />
		<color name="ListboxSelectedBackground" color="#000000" />
		<color name="ListboxSelectedForeground" color="#ffffff" />
		<color name="ListboxMarkedBackground" color="#000000" />
		<color name="ListboxMarkedForeground" color="#ffffff" />
		<color name="ListboxMarkedAndSelectedBackground" color="#000000" />
		<color name="ListboxMarkedAndSelectedForeground" color="#ffffff" />
		<color name="WindowTitleForeground" color="#ffffff" />
		<color name="WindowTitleBackground" color="#000000" />
	</windowstyle>
	<!-- Main screen colors (id=2 Color OLED (dm800se)) -->
	<windowstyle type="skinned" id="2">
		<color name="Background" color="#000000" />
		<color name="LabelForeground" color="#ffffff" />
		<color name="ListboxBackground" color="#000000" />
		<color name="ListboxForeground" color="#ffffff" />
		<color name="ListboxSelectedBackground" color="#000000" />
		<color name="ListboxSelectedForeground" color="#ffffff" />
		<color name="ListboxMarkedBackground" color="#000000" />
		<color name="ListboxMarkedForeground" color="#ffffff" />
		<color name="ListboxMarkedAndSelectedBackground" color="#000000" />
		<color name="ListboxMarkedAndSelectedForeground" color="#ffffff" />
		<color name="WindowTitleForeground" color="#ffffff" />
		<color name="WindowTitleBackground" color="#000000" />
	</windowstyle>
	<windowstylescrollbar id="4"/>
	<fonts>
		<font filename="nmsbd.ttf" name="Display" scale="90"/>
	</fonts>
	<subtitles>
		<sub name="Subtitle_TTX" font="Regular;30" shadowColor="#40101010" shadowOffset="3,3" />
		<sub name="Subtitle_Regular" font="Regular;30" foregroundColor="#DCDCDC" shadowColor="#40101010" shadowOffset="3,3" />
		<sub name="Subtitle_Bold" font="Replacement;30" foregroundColor="#DCDCDC" shadowColor="#40101010" shadowOffset="3,3" />
		<sub name="Subtitle_Italic" font="Regular;30" foregroundColor="#DCAAAA" shadowColor="#40101010" shadowOffset="3,3" />
		<!-- omitting foregroundColor attribute will enable auto-assignment of color -->
	</subtitles>
	<!-- Menu -->
	<screen name="Menu" position="center,center" size="650,460" title="Main menu">
	<ePixmap position="4,3" size="248,452" pixmap="skin_default/menu.png" zPosition="-1"/>
		<widget source="menu" render="Listbox" position="255,8" size="385,440" zPosition="1" enableWrapAround="1" scrollbarMode="showOnDemand" >
			<convert type="TemplatedMultiContent">
				{"template": [ MultiContentEntryText(pos = (10, 8), size = (370, 26), text = 0) ],
				"fonts": [gFont("Regular", 22)],
				"itemHeight": 40
				}
			</convert>
		</widget>
		<widget source="menu" render="Listbox" position="40,25" size="180,180" scrollbarMode="showNever" selectionDisabled="1" transparent="1">
			<convert type="TemplatedMultiContent">
				{"template": [ MultiContentEntryPixmapAlphaBlend(pos = (0,0), size = (180,180), png = 5) ],
				"fonts": [gFont("Regular", 22)],
				"itemHeight": 180
				}
			</convert>
		</widget>
		<widget source="menu" render="Listbox" position="15,250" size="230,180" zPosition="1" scrollbarMode="showNever" selectionDisabled="1" transparent="1">
			<convert type="TemplatedMultiContent">
				{"template": [
						MultiContentEntryText(pos = (0, 0), size = (230, 180), flags = RT_HALIGN_CENTER|RT_VALIGN_CENTER|RT_WRAP, text = 4) ],
				"fonts": [gFont("Regular", 22)],
				"itemHeight": 180
				}
			</convert>
		</widget>
	</screen>
	<!-- Channel selection - TV -->
	<screen name="ChannelSelection" position="center,70" size="1220,640" title="Channel Selection" zPosition="1000" >
		<ePixmap pixmap="skin_default/buttons/red.png" position="10,5" size="200,40" alphatest="on" />
		<ePixmap pixmap="skin_default/buttons/green.png" position="210,5" size="200,40" alphatest="on" />
		<ePixmap pixmap="skin_default/buttons/yellow.png" position="410,5" size="200,40" alphatest="on" />
		<ePixmap pixmap="skin_default/buttons/blue.png" position="610,5" size="200,40" alphatest="on" />
		<widget name="key_red" position="10,5" size="200,40" zPosition="1" font="Regular;20" halign="center" valign="center" backgroundColor="#9f1313" transparent="1" shadowColor="black" shadowOffset="-2,-2" />
		<widget name="key_green" position="210,5" size="200,40" zPosition="1" font="Regular;20" halign="center" valign="center" backgroundColor="#1f771f" transparent="1" shadowColor="black" shadowOffset="-2,-2" />
		<widget name="key_yellow" position="410,5" size="200,40" zPosition="1" font="Regular;20" halign="center" valign="center" backgroundColor="#a08500" transparent="1"  shadowColor="black" shadowOffset="-2,-2" />
		<widget name="key_blue" position="610,5" size="200,40" zPosition="1" font="Regular;20" halign="center" valign="center" backgroundColor="#18188b" transparent="1" shadowColor="black" shadowOffset="-2,-2" />
		<widget source="global.CurrentTime" render="Label" position="1130,12" size="80,22" font="Regular;22" halign="right" backgroundColor="background" shadowColor="black" shadowOffset="-2,-2" transparent="1">
			<convert type="ClockToText">Default</convert>
		</widget>
		<widget source="global.CurrentTime" render="Label" position="910,12" size="210,25" font="Regular;22" halign="right" backgroundColor="background" shadowColor="black" shadowOffset="-2,-2" transparent="1">
			<convert type="ClockToText">Format:%A %d. %B</convert>
		</widget>
		<widget name="list" position="10,55" size="860,576" enableWrapAround="1" scrollbarMode="showOnDemand" backgroundColor="background" serviceInfoFont="Regular;22" colorServiceDescription="grey" colorServiceDescriptionSelected="#d3d3d9" foregroundColorServiceNotAvail="red" picServiceEventProgressbar="skin_default/progcl.png" colorEventProgressbarBorder="grey" colorEventProgressbarBorderSelected="white" />
		<eLabel position="10,50" size="1200,1" backgroundColor="grey" />
		<eLabel position="880,50" size="1,585" backgroundColor="grey" />
		<widget source="ServiceEvent" render="Label" position="890,60" size="320,45" font="Regular;20">
			<convert type="ServiceName">Name</convert>
		</widget>
		<widget source="ServiceEvent" render="Label" position="890,113" size="320,45" font="Regular;20">
			<convert type="EventName">Name</convert>
		</widget>
		<widget source="ServiceEvent" render="Label" position="886,171" size="60,22" font="Regular;20" halign="right">
			<convert type="EventTime">StartTime</convert>
			<convert type="ClockToText">
			</convert>
		</widget>
		<widget source="ServiceEvent" render="Label" position="952,171" size="75,22" font="Regular;20">
			<convert type="EventTime">EndTime</convert>
		<convert type="ClockToText">Format:- %H:%M</convert>
		</widget>
		<widget source="ServiceEvent" render="Progress" position="1035,181" size="166,2" backgroundColor="grey">
		    <convert type="EventTime">Progress</convert>
		</widget>
		<widget source="ServiceEvent" render="Progress" position="1035,179" pixmap="skin_default/progress.png" size="170,5" transparent="1" zPosition="1" >
			<convert type="EventTime">Progress</convert>
		</widget>		
		<widget source="ServiceEvent" render="Label" position="890,205" size="320,420" font="Regular;19" foregroundColor="grey">
			<convert type="EventName">ExtendedDescription</convert>
		</widget>
	</screen>
	<!-- Main infobar -->
	<screen name="InfoBar" position="0,560" size="1280,150" backgroundColor="transparent" flags="wfNoBorder">
		<!-- Background -->
		<ePixmap position="0,0" zPosition="-1" size="1280,150" pixmap="skin_default/infobar.png" />
		<!-- Progressbar (current event duration)-->
		<widget source="session.Event_Now" render="Progress" position="120,22" size="140,2" backgroundColor="grey">
		    <convert type="EventTime">Progress</convert>
		</widget>
		<widget source="session.Event_Now" render="Progress" position="120,20" pixmap="skin_default/progress.png" size="140,6" transparent="1" zPosition="1" >
			<convert type="EventTime">Progress</convert>
		</widget>
		<!-- Service name -->
		<widget source="session.CurrentService" render="Label" position="290,10" size="500,27" font="Regular;24" valign="top" noWrap="1" backgroundColor="#263c59" transparent="1">
			<convert type="ServiceName">Name</convert>
		</widget>
		<!-- Signal Quality -->
		<eLabel text="SNR:" position="820,1" size="50,22" font="Regular;17" backgroundColor="#102e59" foregroundColor="#cccccc" transparent="1" />
		<widget source="session.FrontendStatus" render="Label" position="875,1" size="75,22" font="Regular;17" backgroundColor="#102e59" foregroundColor="grey" transparent="1">
			<convert type="FrontendInfo">SNRdB</convert>
		</widget>
		<!-- Bit error rate -->
		<eLabel text="BER:" position="820,22" size="50,22" font="Regular;17" backgroundColor="#102e59" foregroundColor="#cccccc" transparent="1" noWrap="1" />
		<widget source="session.FrontendStatus" render="Label" position="875,22" size="75,22" font="Regular;17" backgroundColor="#102e59" foregroundColor="grey" transparent="1" noWrap="1">
			<convert type="FrontendInfo">BER</convert>
		</widget>
		<!-- Audio icon (is there multichannel audio?) -->
		<ePixmap pixmap="skin_default/icons/ico_dolby_off.png" position="1000,28" size="42,20" alphatest="on" />
		<widget source="session.CurrentService" render="Pixmap" pixmap="skin_default/icons/ico_dolby_on.png" position="1000,28" size="42,20" zPosition="1" alphatest="on">
			<convert type="ServiceInfo">IsMultichannel</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<!-- Videoformat icon (16:9?) -->
		<ePixmap pixmap="skin_default/icons/ico_format_off.png" position="1050,28" size="42,20" alphatest="on" />
		<widget source="session.CurrentService" render="Pixmap" pixmap="skin_default/icons/ico_format_on.png" position="1050,28" size="42,20" zPosition="1" alphatest="on">
			<convert type="ServiceInfo">IsWidescreen</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<!-- Teletext icon (is teletext available?) -->
		<ePixmap pixmap="skin_default/icons/ico_txt_off.png" position="1100,28" size="42,20" alphatest="on" />
		<widget source="session.CurrentService" render="Pixmap" pixmap="skin_default/icons/ico_txt_on.png" position="1100,28" size="42,20" zPosition="1" alphatest="on">
			<convert type="ServiceInfo">HasTelext</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<!-- HDTV icon -->
		<widget source="session.CurrentService" render="Pixmap" pixmap="skin_default/icons/ico_hd_off.png" position="1150,28" size="42,20" alphatest="on">
			<convert type="ServiceInfo">VideoWidth</convert>
			<convert type="ValueRange">0,720</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="session.CurrentService" render="Pixmap" pixmap="skin_default/icons/ico_hd_on.png" position="1150,28" size="42,20" zPosition="1" alphatest="on">
			<convert type="ServiceInfo">VideoWidth</convert>
			<convert type="ValueRange">721,1980</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<!-- Crypt icon (encrypted service?) -->
		<ePixmap pixmap="skin_default/icons/ico_crypt_off.png" position="1200,28" size="42,20" alphatest="on" />
		<widget source="session.CurrentService" render="Pixmap" pixmap="skin_default/icons/ico_crypt_on.png" position="1200,28" size="42,20" zPosition="1" alphatest="on">
			<convert type="ServiceInfo">IsCrypted</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<!-- Time -->
		<widget source="global.CurrentTime" render="Label" position="40,12" size="70,24" font="Regular;22" foregroundColor="grey" backgroundColor="background" transparent="1">
			<convert type="ClockToText">Default</convert>
		</widget>
		<!-- Channellogo (Picon) -->
		<widget source="session.CurrentService" render="Picon" position="40,67" zPosition="1" size="100,60" alphatest="on">
			<convert type="ServiceName">Reference</convert>
		</widget>
		<!-- tuners in use? -->
		<widget source="session.TunerInfo" render="TunerLabel,0" position="170,127" size="30,20" zPosition="2" font="Regular;16" foregroundColor="yellow" backgroundColor="#4e5a74" transparent="1">
			<convert type="TunerInfo">TunerUseMask</convert>
			<convert type="ValueBitTest">1</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="session.TunerInfo" render="TunerLabel,1" position="200,127" size="30,20" zPosition="2" font="Regular;16" foregroundColor="yellow" backgroundColor="#4e5a74" transparent="1">
			<convert type="TunerInfo">TunerUseMask</convert>
			<convert type="ValueBitTest">2</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="session.TunerInfo" render="TunerLabel,2" position="230,127" size="30,20" zPosition="2" font="Regular;16" foregroundColor="yellow" backgroundColor="#4e5a74" transparent="1">
			<convert type="TunerInfo">TunerUseMask</convert>
			<convert type="ValueBitTest">4</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="session.TunerInfo" render="TunerLabel,3" position="260,127" size="30,20" zPosition="2" font="Regular;16" foregroundColor="yellow" backgroundColor="#4e5a74" transparent="1">
			<convert type="TunerInfo">TunerUseMask</convert>
			<convert type="ValueBitTest">8</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="session.TunerInfo" render="TunerLabel,4" position="290,127" size="30,20" zPosition="2" font="Regular;16" foregroundColor="yellow" backgroundColor="#4e5a74" transparent="1">
			<convert type="TunerInfo">TunerUseMask</convert>
			<convert type="ValueBitTest">16</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="session.FrontendInfo" render="TunerLabel,0" position="170,127" size="30,20" zPosition="3" font="Regular;16" foregroundColor="green" backgroundColor="#4e5a74" transparent="1">
			<convert type="FrontendInfo">NUMBER</convert>
			<convert type="ValueRange">0,0</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="session.FrontendInfo" render="TunerLabel,1" position="200,127" size="30,20" zPosition="3" font="Regular;16" foregroundColor="green" backgroundColor="#4e5a74" transparent="1">
			<convert type="FrontendInfo">NUMBER</convert>
			<convert type="ValueRange">1,1</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="session.FrontendInfo" render="TunerLabel,2" position="230,127" size="30,20" zPosition="3" font="Regular;16" foregroundColor="green" backgroundColor="#4e5a74" transparent="1">
			<convert type="FrontendInfo">NUMBER</convert>
			<convert type="ValueRange">2,2</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="session.FrontendInfo" render="TunerLabel,3" position="260,127" size="30,20" zPosition="3" font="Regular;16" foregroundColor="green" backgroundColor="#4e5a74" transparent="1">
			<convert type="FrontendInfo">NUMBER</convert>
			<convert type="ValueRange">3,3</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="session.FrontendInfo" render="TunerLabel,4" position="290,127" size="30,20" zPosition="3" font="Regular;16" foregroundColor="green" backgroundColor="#4e5a74" transparent="1">
			<convert type="FrontendInfo">NUMBER</convert>
			<convert type="ValueRange">4,4</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<!-- Blinking pixmap (recording in progress?) -->
		<widget source="session.RecordState" render="Pixmap" position="180,56" size="42,20" pixmap="skin_default/icons/icon_rec.png" alphatest="on">
			<convert type="ConditionalShowHide">Blink</convert>
		</widget>
		<!-- Event (now) -->
		<ePixmap pixmap="skin_default/icons/icon_event.png" position="255,60" size="20,13" alphatest="on" />
		<widget source="session.Event_Now" render="Label" position="290,55" size="70,24" font="Regular;22" backgroundColor="background" transparent="1">
			<convert type="EventTime">StartTime</convert>
			<convert type="ClockToText">Default</convert>
		</widget>
		<widget source="session.Event_Now" render="Label" position="360,55" size="750,24" font="Regular;22" backgroundColor="background" transparent="1">
			<convert type="EventName">Name</convert>
		</widget>
		<widget source="session.Event_Now" render="Label" position="1137,55" size="100,24" font="Regular;22" backgroundColor="background" halign="right" transparent="1">
			<convert type="EventTime">Remaining</convert>
			<convert type="RemainingToText">InMinutes</convert>
		</widget>
		<!-- Event (next) -->
		<widget source="session.Event_Next" render="Label" position="290,88" size="70,24" font="Regular;22" backgroundColor="background" foregroundColor="grey" transparent="1">
			<convert type="EventTime">StartTime</convert>
			<convert type="ClockToText">Default</convert>
		</widget>
		<widget source="session.Event_Next" render="Label" position="360,88" size="750,24" font="Regular;22" backgroundColor="background" foregroundColor="grey" transparent="1">
			<convert type="EventName">Name</convert>
		</widget>
		<widget source="session.Event_Next" render="Label" position="1137,88" size="100,24" font="Regular;22" backgroundColor="background" foregroundColor="grey" halign="right" transparent="1">
			<convert type="EventTime">Duration</convert>
			<convert type="ClockToText">InMinutes</convert>
		</widget>
		<!-- Red button (is recording possible?) -->
		<ePixmap pixmap="skin_default/buttons/button_off.png" position="420,125" size="20,20" alphatest="on" />
		<widget source="RecordingPossible" render="Pixmap" pixmap="skin_default/buttons/button_red.png" position="420,125" size="20,20" zPosition="1" alphatest="on">
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="ShowRecordOnRed" render="FixedLabel" text="Record" position="450,125" size="160,22" zPosition="1" font="Regular;18" foregroundColor="#7f848d" backgroundColor="#182946" transparent="1">
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="RecordingPossible" render="FixedLabel" text="Record" position="450,125" size="160,22" zPosition="1" font="Regular;18" backgroundColor="#182946" transparent="1">
			<convert type="ConditionalShowHide" />
		</widget>
		<!-- Red button, Hbbtv (only if record is not on red, for now) -->
		<widget source="HbbtvApplication" render="Pixmap" pixmap="skin_default/buttons/button_red.png" position="420,125" size="20,20" zPosition="1" alphatest="on">
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="HbbtvApplication" render="Label" position="450,125" size="160,22" zPosition="1" font="Regular;18" backgroundColor="#182946" transparent="1">
			<convert type="HbbtvApplicationInfo">Name</convert>
		</widget>
		<!-- Green button (is subservices available?) -->
		<ePixmap pixmap="skin_default/buttons/button_off.png" position="620,125" size="20,20" alphatest="on" />
		<widget source="session.CurrentService" render="Pixmap" pixmap="skin_default/buttons/button_green.png" position="620,125" size="20,20" zPosition="1" alphatest="on">
			<convert type="ServiceInfo">SubservicesAvailable</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<eLabel text="Subservices" position="650,125" size="160,22" font="Regular;18" foregroundColor="#7f848d" backgroundColor="#182946" transparent="1" />
		<widget source="session.CurrentService" render="FixedLabel" text="Subservices" position="650,125" size="160,22" zPosition="1" font="Regular;18" backgroundColor="#182946" transparent="1">
			<convert type="ServiceInfo">SubservicesAvailable</convert>
			<convert type="ConditionalShowHide" />
		</widget>
		<!-- Yellow button (is timeshift possible?) -->
		<ePixmap pixmap="skin_default/buttons/button_off.png" position="820,125" size="20,20" alphatest="on" />
		<widget source="TimeshiftPossible" render="Pixmap" pixmap="skin_default/buttons/button_yellow.png" position="820,125" size="20,20" zPosition="1" alphatest="on">
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="ShowTimeshiftOnYellow" render="FixedLabel" text="Timeshift" position="850,125" size="160,22" zPosition="1" font="Regular;18" foregroundColor="#7f848d" backgroundColor="#182946" shadowOffset="-1,-1" transparent="1">
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="TimeshiftPossible" render="FixedLabel" text="Timeshift" position="850,125" size="160,22" zPosition="1" font="Regular;18" backgroundColor="#182946" transparent="1">
			<convert type="ConditionalShowHide" />
		</widget>
		<!-- Yellow button (Event List for current service) -->
		<widget source="ShowAudioOnYellow" render="Pixmap" pixmap="skin_default/buttons/button_yellow.png" position="820,125" size="20,20" zPosition="1" alphatest="on">
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="ShowAudioOnYellow" render="FixedLabel" text="Audio" position="850,125" size="85,22" zPosition="1" font="Regular;18" backgroundColor="#182946" transparent="1">
			<convert type="ConditionalShowHide" />
		</widget>
		<!-- Yellow button (Event List for current service) -->
		<widget source="ShowEventListOnYellow" render="Pixmap" pixmap="skin_default/buttons/button_yellow.png" position="820,125" size="20,20" zPosition="1" alphatest="on">
			<convert type="ConditionalShowHide" />
		</widget>
		<widget source="ShowEventListOnYellow" render="FixedLabel" text="EPG" position="850,125" size="85,22" zPosition="1" font="Regular;18" backgroundColor="#182946" transparent="1">
			<convert type="ConditionalShowHide" />
		</widget>
		<!-- Blue button (is extensions available?) -->
		<ePixmap pixmap="skin_default/buttons/button_off.png" position="1020,125" size="20,20" alphatest="on" />
		<widget source="ExtensionsAvailable" render="Pixmap" pixmap="skin_default/buttons/button_blue.png" position="1020,125" size="20,20" zPosition="1" alphatest="on">
			<convert type="ConditionalShowHide" />
		</widget>
		<eLabel text="Extensions" position="1050,125" size="160,22" font="Regular;18" foregroundColor="#7f848d" backgroundColor="#182946" transparent="1" />
		<widget source="ExtensionsAvailable" render="FixedLabel" text="Extensions" position="1050,125" size="160,22" zPosition="1" font="Regular;18" backgroundColor="#182946" transparent="1">
			<convert type="ConditionalShowHide" />
		</widget>
		<eLabel position="170,118" size="1066,1" backgroundColor="grey"/>
	</screen>	
	<!-- Messagebox -->
	<screen name="MessageBox" position="340,175" size="600,10" title="Message">
		<widget name="text" position="110,8" size="680,0" font="Regular;22"/>
		<widget name="ErrorPixmap" pixmap="skin_default/icons/input_error.png" position="30,30" size="53,53" alphatest="on"/>
		<widget name="QuestionPixmap" pixmap="skin_default/icons/input_question.png" position="30,30" size="53,53" alphatest="on"/>
		<widget name="InfoPixmap" pixmap="skin_default/icons/input_info.png" position="30,30" size="53,53" alphatest="on"/>
		<widget name="list" position="20,95" size="760,300"/>
		<applet type="onLayoutFinish">
# this should be factored out into some helper code, but currently demonstrates applets.
from enigma import eSize, ePoint

orgwidth = self.instance.size().width()
orgpos = self.instance.position()
textsize = self["text"].getSize()

# y size still must be fixed in font stuff...
textsize = (textsize[0] + 80, textsize[1] + 80)
offset = 20
if self.type == self.TYPE_YESNO:
	offset = 70
wsizex = textsize[0] + 120
wsizey = textsize[1] + offset
if (600 &gt; wsizex):
	wsizex = 600
wsize = (wsizex, wsizey)


# resize
self.instance.resize(eSize(*wsize))

# resize label
self["text"].instance.resize(eSize(*textsize))

# move list
listsize = (wsizex - 20, 60)
self["list"].instance.move(ePoint(10, textsize[1]))
self["list"].instance.resize(eSize(*listsize))

# center window
newwidth = wsize[0]
self.instance.move(ePoint(orgpos.x() + (orgwidth - newwidth)/2, (720-wsizey)/2))

		</applet>
	</screen>
	<!-- Choice box -->
	<screen name="ChoiceBox" position="130,140" size="600,400" title="Input">
		<widget name="text" position="10,10" size="550,25" font="Regular;24"/>
		<widget name="list" position="0,30" size="550,300" itemHeight="30" scrollbarMode="showOnDemand" transparent="1"/>
		<applet type="onLayoutFinish">
# this should be factored out into some helper code, but currently demonstrates applets.
from enigma import eSize, ePoint

orgwidth = self.instance.size().width()
orgpos = self.instance.position()
textsize = self["text"].getSize()

# y size still must be fixed in font stuff...
textsize = (textsize[0] + 80, textsize[1] + 80)
count = len(self.list)
if count &gt; 10:
	count = 10
offset = 30 * count
wsizex = textsize[0] + 80
wsizey = textsize[1] + offset + 20

if (650 &gt; wsizex):
	wsizex = 650
wsize = (wsizex, wsizey)

# resize
self.instance.resize(eSize(*wsize))

# resize label
self["text"].instance.resize(eSize(*textsize))

# move list
listsize = (wsizex - 20, 30 * count)
self["list"].instance.move(ePoint(10, textsize[1]))
self["list"].instance.resize(eSize(*listsize))

# center window
newwidth = wsize[0]
self.instance.move(ePoint((1280-wsizex)/2, (720-wsizey)/2))
		</applet>
	</screen>	
	<!-- Skin Selector -->
	<screen name="SkinSelector" position="center,115" size="820,530" title="Choose your Skin">
		<ePixmap pixmap="skin_default/buttons/red.png" position="10,5" size="200,40" alphatest="on" />
		<widget source="key_red" render="Label" position="10,5" size="200,40" zPosition="1" font="Regular;20" halign="center" valign="center" backgroundColor="#9f1313" transparent="1" shadowColor="black" shadowOffset="-2,-2" />
		<eLabel position="10,50" size="800,1" backgroundColor="grey" />
		<widget name="SkinList" position="10,60" size="420,420" enableWrapAround="1" scrollbarMode="showOnDemand" />
		<eLabel position="440,50" size="1,440" backgroundColor="grey" />
		<widget name="Preview" position="450,110" size="360,270" alphatest="on" />
		<eLabel position="10,490" size="800,1" backgroundColor="grey" />
		<widget source="introduction" render="Label" position="10,498" size="800,25" font="Regular;22" halign="center" transparent="1" />
	</screen>
	<screen name="Toast" position="center,550" size="600,10" backgroundColor="#20111111" flags="wfNoBorder">
		<widget name="text" position="5,5" size="520,0" backgroundColor="#20111111" font="Regular;22" />
	</screen>		
	<!-- Picture in picture -->
	<screen name="PictureInPicture" position="400,60" zPosition="-1" size="240,192" flags="wfNoBorder">
		<widget name="video" position="0,0" size="240,192" backgroundColor="transparent" />
	</screen>
	<!-- Clock display -->
	<screen name="clockDisplay" position="300,100" size="300,300">
		<widget name="okbutton" position="10,10" size="280,40" />
		<widget name="title" position="10,120" size="280,50" />
		<widget name="theClock" position="10,60" size="280,50" />
	</screen>
	<!-- Config OSD -->
	<screen name="configOSD" position="center,center" size="460,350" title="OSD Settings">
		<widget name="okbutton" position="20,270" size="205,40" />
		<widget name="txt_alpha" position="20,20" size="110,20" />
		<widget name="sld_alpha" position="150,20" size="290,20" />
		<widget name="txt_brightness" position="20,60" size="120,20" />
		<widget name="sld_brightness" position="150,20" size="290,20" />
		<widget name="txt_gamma" position="20,100" size="120,20" />
		<widget name="sld_gamma" position="150,100" size="290,20" />
	</screen>
	<!-- Config test -->
	<screen name="configTest" position="300,100" size="300,300" title="config menu">
		<widget name="config" position="10,30" size="420,220" />
	</screen>
    <!-- Wizard -->
	<screen name="DreamPackageWizard" position="0,0" size="720,576" title="Welcome..." flags="wfNoBorder" >
			<widget name="text" position="153,50" size="340,270" font="Regular;23" />
			<widget source="list" render="Listbox" position="50,300" size="440,200" scrollbarMode="showOnDemand" >
				<convert type="StringList" />
			</widget>
			<ePixmap pixmap="skin_default/buttons/button_red.png" position="40,225" size="15,16" alphatest="on" />
			<widget name="languagetext" position="55,225" size="95,30" font="Regular;18" />
			<widget name="config" position="50,300" zPosition="1" size="440,200" transparent="1" scrollbarMode="showOnDemand" />
			<!--widget name="stepslider" position="50,500" zPosition="1" borderWidth="2" size="440,20" backgroundColor="dark" /-->
			<widget name="wizard" pixmap="skin_default/wizard.png" position="40,50" zPosition="10" size="110,174" transparent="1" alphatest="on"/>
			<widget name="rc" pixmap="skin_default/rc0.png" position="500,600" zPosition="10" size="154,471" transparent="1" alphatest="on"/>
			<widget name="arrowdown" pixmap="skin_default/arrowdown.png" position="-100,-100" zPosition="11" size="37,70" transparent="1" alphatest="on"/>
			<widget name="arrowup" pixmap="skin_default/arrowup.png" position="-100,-100" zPosition="11" size="37,70" transparent="1" alphatest="on"/>
			<widget name="arrowup2" pixmap="skin_default/arrowup.png" position="-100,-100" zPosition="11" size="37,70" transparent="1" alphatest="on"/>
	</screen>
	<!-- Tutorial Wizard -->
	<screen name="TutorialWizard" position="0,0" size="720,576" title="Welcome..." flags="wfNoBorder">
		<widget name="text" position="50,100" size="440,200" font="Regular;23" />
		<widget name="list" position="50,300" zPosition="1" size="440,200" />
		<widget name="rc" pixmap="skin_default/rc0.png" position="500,600" zPosition="10" size="154,475" alphatest="on"/>
		<widget name="arrowdown" pixmap="skin_default/arrowdown.png" position="0,0" zPosition="11" size="37,70" alphatest="on"/>
		<widget name="arrowup" pixmap="skin_default/arrowup.png" position="-100,-100" zPosition="11" size="37,70" alphatest="on"/>
		<widget name="arrowup2" pixmap="skin_default/arrowup.png" position="-100,-100" zPosition="11" size="37,70" alphatest="on"/>
	</screen>
	
	<!-- LCD/OLED Screens -->
	<!-- LCD screen (channelselection) -->
	<screen name="ChannelSelection_summary" position="0,0" size="132,64" id="1">
		<widget source="parent.ServiceEvent" render="Label" position="6,0" size="120,25" font="Display;14" halign="center" valign="center" >
			<convert type="ServiceName">Name</convert>
		</widget>
		<widget source="parent.ServiceEvent" render="Progress" position="16,27" size="100,5" borderWidth="1">
			<convert type="EventTime">Progress</convert>
		</widget>
		<widget source="global.CurrentTime" render="Label" position="6,32" size="90,32" font="Display;32" halign="right" valign="top">
			<convert type="ClockToText">Format:%H:%M</convert>
		</widget>
		<widget source="global.CurrentTime" render="Label" position="100,34" zPosition="1" size="26,30" font="Display;16" valign="top">
			<convert type="ClockToText">Format:%S</convert>
		</widget>
	</screen>
	<!-- Color OLED screen (ChannelSelection) -->
	<screen name="ChannelSelection_summary" position="0,0" size="96,64" id="2">
		<widget source="parent.ServiceEvent" render="Label" position="0,0" size="96,28" font="Display;16" halign="center" valign="center" >
			<convert type="ServiceName">Name</convert>
		</widget>
		<widget source="session.Event_Now" render="Progress" position="0,30" size="96,8" borderWidth="1" backgroundColor="dark">
			<convert type="EventTime">Progress</convert>
		</widget>
		<widget source="global.CurrentTime" render="Label" position="0,38" size="96,26" font="Display;32" halign="center" valign="center" foregroundColor="#FFFFFF" backgroundColor="#000000" >
			<convert type="ClockToText">Format:%H:%M</convert>
		</widget>
	</screen>
	<!-- LCD screen (main) -->
	<screen name="InfoBarSummary" position="0,0" size="132,64" id="1">
		<widget source="session.CurrentService" render="Label" position="6,0" size="120,25" font="Display;14" halign="center" valign="center" >
			<convert type="ServiceName">Name</convert>
		</widget>
		<widget source="session.Event_Now" render="Progress" position="16,27" size="100,5" borderWidth="1">
			<convert type="EventTime">Progress</convert>
		</widget>
		<widget source="global.CurrentTime" render="Label" position="6,32" size="90,32" font="Display;32" halign="right" valign="top">
			<convert type="ClockToText">Format:%H:%M</convert>
		</widget>
		<widget source="global.CurrentTime" render="Label" position="100,34" zPosition="1" size="26,30" font="Display;16" valign="top">
			<convert type="ClockToText">Format:%S</convert>
		</widget>
		<widget source="session.RecordState" render="FixedLabel" text=" " position="6,32" zPosition="1" size="126,32">
			<convert type="ConfigEntryTest">config.usage.blinking_display_clock_during_recording,True,CheckSourceBoolean</convert>
			<convert type="ConditionalShowHide">Blink</convert>
		</widget>
	</screen>
	<!-- Color OLED screen (main) -->
	<screen name="InfoBarSummary" position="0,0" size="96,64" id="2">
		<widget source="session.CurrentService" render="Label" position="0,0" size="96,28" font="Display;16" halign="center" valign="center" >
			<convert type="ServiceName">Name</convert>
		</widget>
		<widget source="session.Event_Now" render="Progress" position="0,30" size="96,8" borderWidth="1" backgroundColor="dark">
			<convert type="EventTime">Progress</convert>
		</widget>
		<widget source="global.CurrentTime" render="Label" position="0,38" size="96,26" font="Display;32" halign="center" valign="center" foregroundColor="#FFFFFF" backgroundColor="#000000" >
			<convert type="ClockToText">Format:%H:%M</convert>
		</widget>
		<widget source="session.RecordState" render="FixedLabel" text=" " position="0,38" zPosition="1" size="96,26">
			<convert type="ConfigEntryTest">config.usage.blinking_display_clock_during_recording,True,CheckSourceBoolean</convert>
			<convert type="ConditionalShowHide">Blink</convert>
		</widget>
	</screen>
	<!-- LCD screen (movieplayer) -->
	<screen name="InfoBarMoviePlayerSummary" position="0,0" size="132,64" id="1">
		<widget source="session.CurrentService" render="Label" position="6,0" size="120,25" font="Display;14" halign="center" valign="center" >
			<convert type="ServiceName">Name</convert>
		</widget>
		<widget source="session.CurrentService" render="Progress" position="16,27" size="100,5" borderWidth="1">
			<convert type="ServicePosition">Position</convert>
		</widget>
		<widget source="global.CurrentTime" render="Label" position="6,32" size="120,32" font="Display;32" halign="center" valign="center">
			<convert type="ClockToText">Format:%H:%M</convert>
		</widget>
		<widget source="session.RecordState" render="FixedLabel" text=" " position="6,32" zPosition="1" size="120,32">
			<convert type="ConfigEntryTest">config.usage.blinking_display_clock_during_recording,True,CheckSourceBoolean</convert>
			<convert type="ConditionalShowHide">Blink</convert>
		</widget>
	</screen>
	<!-- Color OLED screen (movieplayer) -->
	<screen name="InfoBarMoviePlayerSummary" position="0,0" size="96,64" id="2">
		<widget source="session.CurrentService" render="Label" position="0,0" size="96,28" font="Display;16" halign="center" valign="center" >
			<convert type="ServiceName">Name</convert>
		</widget>
		<widget source="session.CurrentService" render="Progress" position="0,30" size="96,8" borderWidth="1" backgroundColor="dark">
			<convert type="ServicePosition">Position</convert>
		</widget>
		<widget source="global.CurrentTime" render="Label" position="0,38" size="96,26" font="Display;32" halign="center" valign="center" foregroundColor="#FFFFFF" backgroundColor="#000000" >
			<convert type="ClockToText">Format:%H:%M</convert>
		</widget>
		<widget source="session.RecordState" render="FixedLabel" text=" " position="0,38" zPosition="1" size="96,26">
			<convert type="ConfigEntryTest">config.usage.blinking_display_clock_during_recording,True,CheckSourceBoolean</convert>
			<convert type="ConditionalShowHide">Blink</convert>
		</widget>
	</screen>
	<!-- LCD screen (ChoiceBox) -->
	<screen name="ChoiceBox_summary" position="0,0" size="132,64" id="1">
		<widget source="parent.summary_list" render="Label" position="6,0" size="126,64" font="Display;11" />
	</screen>
	<!-- Color OLED screen (ChoiceBox) -->
	<screen name="ChoiceBox_summary" position="0,0" size="96,64" id="2">
		<widget source="parent.summary_list" render="Label" position="0,0" size="96,64" font="Display;10" />
	</screen>
	<!-- LCD screen (MessageBox) -->
	<screen name="MessageBox_summary" position="0,0" size="132,64" id="1">
		<widget source="parent.Text" render="Label" position="0,0" size="132,52" font="Display;11" halign="center" valign="center" />
		<widget source="parent.selectedChoice" render="Label" position="6,50" size="120,14" font="Display;14" halign="center" valign="center" />
	</screen>
	<!-- Color OLED screen (MessageBox) -->
	<screen name="MessageBox_summary" position="0,0" size="96,64" id="2">
		<widget source="parent.Text" render="Label" position="0,0" size="96,52" font="Display;10" halign="center" valign="center" />
		<widget source="parent.selectedChoice" render="Label" position="0,50" size="96,14" font="Display;12" halign="center" valign="center" />
	</screen>
	<!-- LCD screen (menus) -->
	<screen name="MenuSummary" position="0,0" size="132,64" id="1">
		<widget source="parent.title" render="Label" position="6,0" size="120,32" font="Display;14" halign="center" valign="center"/>
		<widget source="parent.menu" render="Label" position="6,32" size="120,32" font="Display;16" halign="center" valign="center">
			<convert type="StringListSelection" />
		</widget>
	</screen>
	<!-- Color OLED screen (menus) -->
	<screen name="MenuSummary" position="0,0" size="96,64" id="2">
		<widget source="parent.title" render="Label" position="0,0" size="96,32" font="Display;15" halign="center" valign="center"/>
		<widget source="parent.menu" render="Label" position="0,32" size="96,32" font="Display;16" halign="center" valign="top">
			<convert type="StringListSelection" />
		</widget>
	</screen>
	<!-- LCD screen (ServiceScan) -->
	<screen name="ServiceScanSummary" position="0,0" size="132,64" id="1">
		<widget name="Title" position="6,4" size="120,42" font="Display;16" transparent="1" />
		<widget name="Service" position="6,22" size="120,26" font="Display;12" transparent="1" />
		<widget name="scan_progress" position="6,50" zPosition="1" borderWidth="1" size="56,12" backgroundColor="dark" />
	</screen>
	<!-- Color OLED screen (ServiceScan) -->
	<screen name="ServiceScanSummary" position="0,0" size="96,64" id="2">
		<widget name="Title" position="0,0" size="96,30" font="Display;14" transparent="1" />
		<widget name="Service" position="0,30" size="96,20" font="Display;10" transparent="1" />
		<widget name="scan_progress" position="0,50" zPosition="1" borderWidth="1" size="96,12" backgroundColor="dark" />
	</screen>
	<!-- LCD screen (setup) -->
	<screen name="SetupSummary" position="0,0" size="132,64" id="1">
		<widget source="SetupTitle" render="Label" position="6,0" size="120,24" halign="left" font="Display;12" />
		<widget source="SetupEntry" render="Label" position="6,24" size="120,24" halign="center" font="Display;12" />
		<widget source="SetupValue" render="Label" position="6,48" size="120,16" halign="right" font="Display;12" />
	</screen>
	<!-- Color OLED screen (setup) -->
	<screen name="SetupSummary" position="0,0" size="96,64" id="2">
		<widget source="SetupTitle" render="Label" position="0,0" size="96,24" halign="left" font="Display;10" />
		<widget source="SetupEntry" render="Label" position="0,24" size="96,24" halign="center" font="Display;10" />
		<widget source="SetupValue" render="Label" position="0,48" size="96,16" halign="right" font="Display;10" />
	</screen>
	<!-- LCD screen (misc) -->
	<screen name="SimpleSummary" position="0,0" size="132,64" id="1">
		<widget source="parent.Title" render="Label" position="6,0" size="120,64" font="Display;16" halign="center" valign="center" />
	</screen>
	<!-- Color OLED screen (misc) -->
	<screen name="SimpleSummary" position="0,0" size="96,64" id="2">
		<widget source="parent.Title" render="Label" position="0,0" size="96,64" font="Display;14" halign="center" valign="center" />
	</screen>
	<!-- LCD screen (standby) -->
	<screen name="StandbySummary" position="0,0" size="132,64" id="1">
		<widget source="global.CurrentTime" render="Label" position="6,0" size="120,64" font="Display;40" halign="center" valign="center">
			<convert type="ClockToText">Format:%H:%M</convert>
		</widget>
		<widget source="session.RecordState" render="FixedLabel" position="6,0" zPosition="1" size="120,64" text=" ">
			<convert type="ConfigEntryTest">config.usage.blinking_display_clock_during_recording,True,CheckSourceBoolean</convert>
			<convert type="ConditionalShowHide">Blink</convert>
		</widget>
	</screen>
	<!-- Color OLED screen (standby) -->
	<screen name="StandbySummary" position="0,0" size="96,64" id="2">
		<widget source="global.CurrentTime" render="Label" position="0,0" size="96,64" font="Display;38" halign="center" valign="center">
			<convert type="ClockToText">Format:%H:%M</convert>
		</widget>
		<widget source="session.RecordState" render="FixedLabel" position="0,0" zPosition="1" size="96,64" text=" ">
			<convert type="ConfigEntryTest">config.usage.blinking_display_clock_during_recording,True,CheckSourceBoolean</convert>
			<convert type="ConditionalShowHide">Blink</convert>
		</widget>
	</screen>
	<!-- LCD screen (JobView) -->
	<screen name="JobView_summary" position="0,0" size="132,64" id="1">
		<widget source="parent.summary_job_name" render="Label" position="6,4" size="120,42" font="Display;16" />
		<widget source="parent.summary_job_task" render="Label" position="6,22" size="120,26" font="Display;12" />
		<widget source="parent.summary_job_progress" render="Progress" position="6,50" size="60,12" borderWidth="1" zPosition="1" />
		<widget source="parent.summary_job_progress" render="Label" position="66,50" size="50,12" font="Display;12" zPosition="2" halign="center" transparent="1"  >
			<convert type="ProgressToText" />
		</widget>
	</screen>
	<!-- Color OLED screen (JobView) -->
	<screen name="JobView_summary" position="0,0" size="96,64" id="2">
		<widget source="parent.summary_job_name" render="Label" position="0,4" size="96,42" font="Display;14" />
		<widget source="parent.summary_job_task" render="Label" position="0,22" size="96,26" font="Display;10" />
		<widget source="parent.summary_job_progress" render="Progress" position="0,50" size="60,12" borderWidth="1" zPosition="1" />
		<widget source="parent.summary_job_progress" render="Label" position="60,50" size="36,12" font="Display;10" zPosition="2" halign="center" transparent="1"  >
			<convert type="ProgressToText" />
		</widget>
	</screen>
	<!-- LCD screen (Wizard) -->
	<screen name="WizardSummary" position="0,0" size="132,64" id="1">
		<widget source="text" render="Label" position="6,0" size="120,16" font="Display;16" transparent="1" />
		<widget source="parent.list" render="Label" position="6,18" size="120,46" font="Display;12">
			<convert type="StringListSelection" />
		</widget>
	</screen>
	<!-- Color OLED screen (Wizard) -->
	<screen name="WizardSummary" position="0,0" size="96,64" id="2">
		<widget source="text" render="Label" position="0,0" size="96,16" font="Display;14" transparent="1" />
		<widget source="parent.list" render="Label" position="0,18" size="96,46" font="Display;12">
			<convert type="StringListSelection" />
		</widget>
	</screen>

</skin>
